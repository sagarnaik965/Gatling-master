package com.myGatlingTest
import io.gatling.core.Predef.{constantUsersPerSec, _}
import io.gatling.http.Predef._
import io.gatling.http.Predef.http

import scala.concurrent.duration.DurationInt
class CryptoService extends Simulation {
  val stagingURL="http://192.168.10.9:8080"
  val localURL="http://localhost:8080"
  val pcURL="http://10.210.5.151:8080"


  val httpProtocol = http
    .baseUrl(pcURL)


  // Define the XML body as a variable
  val reqBodyStaging: String =
    """<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
      |<request ac="A100001" sa="A100001" opr="encrypt" tkntype="soft" mask="no" keytype="aes" lk="ddb81abd-23d7-4cf6-ab5e-29d01bcc2950" ts="2024-05-07T10:41:40.066" txn="90f13a35-37ab-45ff-b7ee-363492b14211" xmlns="http://www.cdac.in/cryptoservice">
      |  <data>TWpBeU15MHdOUzB3TWxReE1EbzBNVG8wTUM0d05qYk1kckhXZ2UvOWJnRTh6Q1V2QnZzQnRKaW1hWk1XUGpaeUFWRnBDb3RVUFRmUDhXZlBsbXhBSmJvbVB4ZGpuMVMvOC9qNEdlM0dkMzhxQjZyM2RPeS8zaUFjbFBYbFMyaHhzU1BqYWFCam8yWGd0NHVOT2xDZjFCclp0MGcyeXl1eHhYd0JRcmdTTDMramg2dVU0aEVmY2NRbXU2NVVTcjZ3RE1GcmNKRjhTRURFWkNtcjlrNklKLzF0TlFWOTI4enltWkxxMlNzcmduVGl2ZmRPY2ZjZlcwT3pLZFQyVjZqNHNQT1pHZDhSTkFMc2c4TnhzaXNjNjMrWkVrQTFWdWxwUVEvQ1hoLzlRNGRjWGF4MFIrVjZtOU5Pa1lsQ2l1enZQUUpjUHpQZ1V4UlFpNWhBcEo4cnFOWGZCZVA4d3JncmtDNzZodjlabFN3QjRDdWxOTjJDWk9jb1JwUUZveXEzZVNGOEk2cW1lNDNsUDN5UHNUTT0=</data>
      |  <CustOpts>
      |    <ParaName name="sessionKey" value="fMzqVCvAKsNWjFhJUCawOrQ3R5QEky7/VtjBbfiSVESlTj3Eacb5Qh3WnUyZjXo6npizFEX6Ltl5otbfSMnE2CDsLwdynFKX1JV4THWzEMLcpG/ntLMRcYnBbjPD8Pcs+4nrHmolXkMrbVrqNAN/q+jK6BG9DEKOOZdmWYfG4o7Ejws1+HdsuNaDq/enJta3YIPPdxXJeTg0mSBD0R5cnX8CpdjV+YlnMSKdesMWgyzMOcsRmevyAG4JDnVojsfEYa94+mSVzDUNEDcE/1Heuu3HmyQaEkuTeKhBgU20eXFzufMVfFy9DQ0GDhVFKC4syo4FrrhOEzbtyG8GcTq6Qw=="/>
      |  </CustOpts>
      |</request>""".stripMargin

  val reqBodyLocal: String =
    """<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
      |<request ac="A100001" sa="A100001" opr="encrypt" tkntype="soft" mask="no" keytype="aes" lk="ddb81abd-23d7-4cf6-ab5e-29d01bcc2950" ts="2024-05-07T10:41:40.066" txn="90f13a35-37ab-45ff-b7ee-363492b14211" xmlns="http://www.cdac.in/cryptoservice">
      |  <data>TWpBeU15MHdOUzB3TWxReE1EbzBNVG8wTUM0d05qYk1kckhXZ2UvOWJnRTh6Q1V2QnZzQnRKaW1hWk1XUGpaeUFWRnBDb3RVUFRmUDhXZlBsbXhBSmJvbVB4ZGpuMVMvOC9qNEdlM0dkMzhxQjZyM2RPeS8zaUFjbFBYbFMyaHhzU1BqYWFCam8yWGd0NHVOT2xDZjFCclp0MGcyeXl1eHhYd0JRcmdTTDMramg2dVU0aEVmY2NRbXU2NVVTcjZ3RE1GcmNKRjhTRURFWkNtcjlrNklKLzF0TlFWOTI4enltWkxxMlNzcmduVGl2ZmRPY2ZjZlcwT3pLZFQyVjZqNHNQT1pHZDhSTkFMc2c4TnhzaXNjNjMrWkVrQTFWdWxwUVEvQ1hoLzlRNGRjWGF4MFIrVjZtOU5Pa1lsQ2l1enZQUUpjUHpQZ1V4UlFpNWhBcEo4cnFOWGZCZVA4d3JncmtDNzZodjlabFN3QjRDdWxOTjJDWk9jb1JwUUZveXEzZVNGOEk2cW1lNDNsUDN5UHNUTT0=</data>
      |  <CustOpts>
      |    <ParaName name="sessionKey" value="fMzqVCvAKsNWjFhJUCawOrQ3R5QEky7/VtjBbfiSVESlTj3Eacb5Qh3WnUyZjXo6npizFEX6Ltl5otbfSMnE2CDsLwdynFKX1JV4THWzEMLcpG/ntLMRcYnBbjPD8Pcs+4nrHmolXkMrbVrqNAN/q+jK6BG9DEKOOZdmWYfG4o7Ejws1+HdsuNaDq/enJta3YIPPdxXJeTg0mSBD0R5cnX8CpdjV+YlnMSKdesMWgyzMOcsRmevyAG4JDnVojsfEYa94+mSVzDUNEDcE/1Heuu3HmyQaEkuTeKhBgU20eXFzufMVfFy9DQ0GDhVFKC4syo4FrrhOEzbtyG8GcTq6Qw=="/>
      |  </CustOpts>
      |</request>""".stripMargin

  val reqBodyLocalBigger: String =
    """<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
      |<request ac="A100001" sa="A100001" opr="encrypt" tkntype="soft" mask="no" keytype="aes" lk="a177d9e1-71c7-0311-3157-30996fae4a8c" ts="2023-08-09T11:37:21.557" txn="69a2f833-9673-462d-8270-1277d89acb20" xmlns="http://www.cdac.in/cryptoservice" xmlns:ns2="http://www.cdac.in/pii">
      |	<data>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPG5zNTpPdHAgeG1sbnM6bnM1PSJodHRwOi8vd3d3LmNkYWMuaW4vT1RQX3YxIiB4bWxuczpuczI9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyMiIHhtbG5zOm5zMz0iaHR0cDovL3d3dy51aWRhaS5nb3YuaW4vYXV0aGVudGljYXRpb24vdWlkLWF1dGgtcmVxdWVzdC8yLjAiIHhtbG5zOm5zND0iaHR0cDovL3d3dy51aWRhaS5nb3YuaW4vYXV0aGVudGljYXRpb24vdWlkLWF1dGgtcmVxdWVzdC1kYXRhLzIuMCIgeG1sbnM6bnM2PSJodHRwOi8vd3d3LmNkYWMuaW4vY3J5cHRvc2VydmljZSIgYWM9IlRFU1QwMDAwMDEiIGxrPSJNTm5iTmdvNFNZbWdpcUFHZEM4Wm9ONVhUb1ctQjlZQUVHTjdvM09qMjk0aEZXeDVMYXBBcUQ4IiBzYT0iVEVTVDAwMDAwMSIgdHM9IjIwMjQtMDEtMDJUMTQ6MDA6MjUiIHR4bj0iZDE4MGUwMGQtNThjOC0xNzllLTgyMGMtMDUyYmY4Njg3Y2YzIiB0eXBlPSJBIiB1aWQ9IjM4NDEwMzQ3MjQ0OCIgdmVyPSIyLjUiPgogICAgPG5zNTpPcHRzIGNoPSIwMSIvPgogICAgPFNpZ25hdHVyZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI+CiAgICAgICAgPFNpZ25lZEluZm8+CiAgICAgICAgICAgIDxDYW5vbmljYWxpemF0aW9uTWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMS9SRUMteG1sLWMxNG4tMjAwMTAzMTUiLz4KICAgICAgICAgICAgPFNpZ25hdHVyZU1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNyc2Etc2hhMSIvPgogICAgICAgICAgICA8UmVmZXJlbmNlIFVSST0iIj4KICAgICAgICAgICAgICAgIDxUcmFuc2Zvcm1zPgogICAgICAgICAgICAgICAgICAgIDxUcmFuc2Zvcm0gQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjZW52ZWxvcGVkLXNpZ25hdHVyZSIvPgogICAgICAgICAgICAgICAgPC9UcmFuc2Zvcm1zPgogICAgICAgICAgICAgICAgPERpZ2VzdE1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNzaGExIi8+CiAgICAgICAgICAgICAgICA8RGlnZXN0VmFsdWU+cFF0SzJvWnV5dEgvNnZ3V3N2Z1E1V1d2SzlJPTwvRGlnZXN0VmFsdWU+CiAgICAgICAgICAgIDwvUmVmZXJlbmNlPgogICAgICAgIDwvU2lnbmVkSW5mbz4KICAgICAgICA8U2lnbmF0dXJlVmFsdWU+SG83SGR2bENKTUFIbVBnK1lRQnNMaVBLM2NacWZQbENmblRhZXlQMzVuOW9pRVpabzMxczNNZEdsU3NGMzVleW5qakYxZGUrcVF0NApWbFBEeGdiVkN0eUhyQ3ZzWVdvYTdwQnpEaFU2OC9RQi85dTNISUJveENYTW45NG9nRXo1SlJVQ2U4c3FWSXB0UXBkVjMvNUJQUlV5CjZnZ1ZxOXJ2Q2xycEhYZUl1R1BiSzRwZUtreC9wSFFnQ202d1BXYnpCam5hZm93YU1tZjVKb1ZGN3g2blFpTHdneDJwUFpqRTh2NkwKMlJkK2tpalM0QUF6ZHlOeFFKOUd3ZTJnTlIwdTJJSXhvbk5GQUxCa0Z3Z3VReGEyemlGc0h4NkN3SUFDR3ZPVG8wV3hmak9kWXFiOApRTnlTTFV2RittbGx0cGNSdzBtUUV2S1FCc1J3L25rTzhVVFk5UT09PC9TaWduYXR1cmVWYWx1ZT4KICAgICAgICA8S2V5SW5mbz4KICAgICAgICAgICAgPFg1MDlEYXRhPgogICAgICAgICAgICAgICAgPFg1MDlTdWJqZWN0TmFtZT5DTj1ESU5BIE5BVEhKSEEgRElOS0VSLDIuNS40LjU9IzEzNDAzMTM1MzczMjQzMzkzNjQ1MzUzOTQ1NDYzMjQyNDQzMzMzMzgzNjM1NDUzODM0NDEzNzM1MzY0NDM4MzY0NjQyMzI0NTQ2NDM0NDMzMzkzMjM3MzUzMDQ1Mzg0MjM3MzA0MzM3NDQzNjM4Mzg0MjM0NDMzNzM4MzczOTQzNDIzMyxTVD1EZWxoaSwyLjUuNC4xNz0jMTMwNjMxMzEzMDMwMzAzMSwyLjUuNC4yMD0jMTM0MDM5NjUzNTMwNjEzNTY1MzgzMDYxMzkzNDY2MzkzNzMxMzYzMTYyNjYzMjYyMzkzMzMwNjQ2MzMxMzMzOTY0MzYzNzM1MzQ2NjMzMzgzOTY2MzUzNTM2MzAzMTYzNjIzNzM2MzAzNjM2NjIzMTY0NjYzMjM5NjYzNTY1MzczNzM1LE9VPUNPUlBPUkFURSBJTkZPUk1BVElPTiBTWVNURU1TLE89SU5ESUFOIE9JTCBDT1JQT1JBVElPTiBMVEQsQz1JTjwvWDUwOVN1YmplY3ROYW1lPgogICAgICAgICAgICAgICAgPFg1MDlDZXJ0aWZpY2F0ZT5NSUlGK2pDQ0JPS2dBd0lCQWdJSEFLN242VFRLMERBTkJna3Foa2lHOXcwQkFRc0ZBREI4TVFzd0NRWURWUVFHRXdKSlRqRWlNQ0FHCkExVUVDaE1aVTJsbWVTQlVaV05vYm05c2IyZHBaWE1nVEdsdGFYUmxaREVQTUEwR0ExVUVDeE1HVTNWaUxVTkJNVGd3TmdZRFZRUUQKRXk5VFlXWmxVMk55ZVhCMElITjFZaTFEUVNCbWIzSWdRMnhoYzNNZ015QlBjbWRoYm1sNllYUnBiMjRnTWpBeU1qQWVGdzB5TXpBMQpNalF4TURFeE5UQmFGdzB5TmpBMU1qUXhNREV4TlRCYU1JSUJMekVMTUFrR0ExVUVCaE1DU1U0eEl6QWhCZ05WQkFvVEdrbE9SRWxCClRpQlBTVXdnUTA5U1VFOVNRVlJKVDA0Z1RGUkVNU1l3SkFZRFZRUUxFeDFEVDFKUVQxSkJWRVVnU1U1R1QxSk5RVlJKVDA0Z1UxbFQKVkVWTlV6RkpNRWNHQTFVRUZCTkFPV1UxTUdFMVpUZ3dZVGswWmprM01UWXhZbVl5WWprek1HUmpNVE01WkRZM05UUm1Nemc1WmpVMQpOakF4WTJJM05qQTJObUl4WkdZeU9XWTFaVGMzTlRFUE1BMEdBMVVFRVJNR01URXdNREF4TVE0d0RBWURWUVFJRXdWRVpXeG9hVEZKCk1FY0dBMVVFQlJOQU1UVTNNa001TmtVMU9VVkdNa0pFTXpNNE5qVkZPRFJCTnpVMlJEZzJSa0l5UlVaRFJETTVNamMxTUVVNFFqY3cKUXpkRU5qZzRRalJETnpnM09VTkNNekVjTUJvR0ExVUVBeE1UUkVsT1FTQk9RVlJJU2toQklFUkpUa3RGVWpDQ0FTSXdEUVlKS29aSQpodmNOQVFFQkJRQURnZ0VQQURDQ0FRb0NnZ0VCQVBObEZCT2QrcmJjbngyRVdpRFJDUUNEQzNkWGE2eEg3YXdlMncxRFRVS1F0THhaCjFnd0lxenNsVkFkSi9nTGRVajQ2b3BvbnV1NTRSUkFyNmhXOHppRmk1d3RZbEM2SVJWUm9BOEkvRm9rWGNIeWVzZlNjTkg1TTFKSHEKcjNNNVVKVE9YR1VaSzVMWDU1T0w1bWhZQTQ5Q1VQbWdBVlhWYTQwV2dIMmtteFdKWmtRTzlEcHRJclFVZkNDT2pCZlcvYzVnSWVkcwo1VXluMjYySGRVUTFUeVdlZklGenhCQ3lmTk44em53bjhqZmpPMGF6TTU2TDc3QUVtdVRHOGlsTjRiRExqNXFQYk5vbUlkS2xvMG9hCkhTVmxJZVpIZ2ZvMGRaOUZJS3RoUE8zTmZxdkNLWDE3SW4vU2F3TWdteEFrNkVjOGJtd3VHZWpPaWdtZm56RkdaUlVDQXdFQUFhT0MKQWNvd2dnSEdNQk1HQTFVZEl3UU1NQXFBQ0VzUlhGMjBnNmNRTUJFR0ExVWREZ1FLQkFoRU9uU0tiS3hBUmpDQnFRWUlLd1lCQlFVSApBUUVFZ1p3d2daa3dUZ1lJS3dZQkJRVUhNQUtHUW1oMGRIQnpPaTh2ZDNkM0xuTmhabVZ6WTNKNWNIUnVaWGN1WTI5dEwxTmhabVZUClkzSjVjSFJEYkdGemN6TlBjbWRoYm1sNllYUnBiMjR5TURJeUxtTmxjakJIQmdnckJnRUZCUWN3QVlZN2FIUjBjRG92TDI5amMzQXUKYzJGbVpYTmpjbmx3ZEM1amIyMHZVMkZtWlZOamNubHdkRU5zWVhOek0wOXlaMkZ1YVhwaGRHbHZiakl3TWpJd1VBWURWUjBmQkVrdwpSekJGb0VPZ1FZWS9hSFIwY0RvdkwyTnliREl1YzJGbVpYTmpjbmx3ZEM1amIyMHZVMkZtWlZOamNubHdkRU5zWVhOek0wOXlaMkZ1CmFYcGhkR2x2YmpJd01qSXVZM0pzTUIwR0ExVWRJQVFXTUJRd0NBWUdZSUprWkFJRE1BZ0dCbUNDWkdRQ0FqQU1CZ05WSFJNQkFmOEUKQWpBQU1FQUdBMVVkSlFRNU1EY0dDQ3NHQVFVRkJ3TUNCZ2dyQmdFRkJRY0RCQVlKS29aSWh2Y3ZBUUVGQmdvckJnRUVBWUkzQ2dNTQpCZ29yQmdFRUFZSTNGQUlDTUI4R0ExVWRFUVFZTUJhQkZHUnBibXRsY21wQWFXNWthV0Z1YjJsc0xtbHVNQTRHQTFVZER3RUIvd1FFCkF3SUd3REFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBVk5JcWQ0WEJxa1R4RlFLZ1VSbnNENnZTTklOZWFkYVFKMTdqeHVhQXU4UEcKTDlOS29lV2d6eVZ2Uk5yRkNObjBBMGVtWFhKL21ObEpKaG8xZUJhVHVWb3FZa1B3ZEV1ekY3K1JnckZOQmU5Sm1KUjNFd2FVR0N5aQpwT2pPS1lXbTdLT2xCQVZMUzdWK0s3OHYrdEFLNlJXUGRxOHpTL0dQeThaRGd2WlNveDhRcVV3QVhNK214TU01V0JsdzFKYUdRcmhPClNnUWVVOFRRbXNEaEIzemEreWc3cVZiWG12cnVQSmR3L3N2MlRnbU5ETzlncVNvZEE0MGtsb0dScTJCYkl2Qms1bUNVbjFiVlBvL1AKTm1GdVJWZ2xoS2h5NWhHVW1wTkw4M1QxWUhjR3R1TmM1K3lLcUxPamNLUlR4TDgzWEhpbnNJMWc5RFp1Ri9ObWpLTXNyQT09PC9YNTA5Q2VydGlmaWNhdGU+CiAgICAgICAgICAgIDwvWDUwOURhdGE+CiAgICAgICAgPC9LZXlJbmZvPgogICAgPC9TaWduYXR1cmU+CjwvbnM1Ok90cD4=</data>
      |	<CustOpts>
      |		<ParaName name="sessionKey" value="LOnWoVqlztpv4mKxlKAlktWUCUfVEfJyCS8thLL23QiwW0AsCCRjuNIBn4vKCzpz1gbafa+Os9CfQ3AgYJInQJtKbQvbhV+cQHzZYsLdsge0akr0KD3Q+5Av0Bj5CrL5CxSHDsj9hZ7SOTjYIjtO7ROZrw994byLsFfibmCXeILtWaliuxKaXv6VBjtapQ69gy0lLeElTJWmQyvhccQO6Pzm7MkI9gvRh6KKELn3JZTkaS7og4rcd79okrp38sS8FaR5SwMguxFWBKuHmL+N3Fhxv6n8+fDARgFGMaiGQUEMoejrwxIrzyd/HuWIq1S9qZraMfLl6Hxbv05rs2YybA=="/>
      |	</CustOpts>
      |</request>""".stripMargin
//  val csvFeeder = csv("data/vaultLoad.csv")

  val scnAdvLoad = scenario("LoadTest")

//    .feed(csvFeeder)

    .exec(http("LoadTest For ASA-IOCL ")
      .post("/crypto/encrypt")
      .header("Content-Type", "application/xml")
      //      //----------------------------  XML for Crypto   ------------------------------------
//      .body(StringBody("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<request ac=\"A100001\" sa=\"A100001\" opr=\"encrypt\" tkntype=\"soft\" mask=\"no\" keytype=\"aes\" lk=\"ddb81abd-23d7-4cf6-ab5e-29d01bcc2950\" ts=\"2024-05-07T10:41:40.066\" txn=\"90f13a35-37ab-45ff-b7ee-363492b14211\" xmlns=\"http://www.cdac.in/cryptoservice\">\n\t<data>TWpBeU15MHdOUzB3TWxReE1EbzBNVG8wTUM0d05qYk1kckhXZ2UvOWJnRTh6Q1V2QnZzQnRKaW1hWk1XUGpaeUFWRnBDb3RVUFRmUDhXZlBsbXhBSmJvbVB4ZGpuMVMvOC9qNEdlM0dkMzhxQjZyM2RPeS8zaUFjbFBYbFMyaHhzU1BqYWFCam8yWGd0NHVOT2xDZjFCclp0MGcyeXl1eHhYd0JRcmdTTDMramg2dVU0aEVmY2NRbXU2NVVTcjZ3RE1GcmNKRjhTRURFWkNtcjlrNklKLzF0TlFWOTI4enltWkxxMlNzcmduVGl2ZmRPY2ZjZlcwT3pLZFQyVjZqNHNQT1pHZDhSTkFMc2c4TnhzaXNjNjMrWkVrQTFWdWxwUVEvQ1hoLzlRNGRjWGF4MFIrVjZtOU5Pa1lsQ2l1enZQUUpjUHpQZ1V4UlFpNWhBcEo4cnFOWGZCZVA4d3JncmtDNzZodjlabFN3QjRDdWxOTjJDWk9jb1JwUUZveXEzZVNGOEk2cW1lNDNsUDN5UHNUTT0=</data>\n\t<CustOpts>\n\t\t<ParaName name=\"sessionKey\" value=\"fMzqVCvAKsNWjFhJUCawOrQ3R5QEky7/VtjBbfiSVESlTj3Eacb5Qh3WnUyZjXo6npizFEX6Ltl5otbfSMnE2CDsLwdynFKX1JV4THWzEMLcpG/ntLMRcYnBbjPD8Pcs+4nrHmolXkMrbVrqNAN/q+jK6BG9DEKOOZdmWYfG4o7Ejws1+HdsuNaDq/enJta3YIPPdxXJeTg0mSBD0R5cnX8CpdjV+YlnMSKdesMWgyzMOcsRmevyAG4JDnVojsfEYa94+mSVzDUNEDcE/1Heuu3HmyQaEkuTeKhBgU20eXFzufMVfFy9DQ0GDhVFKC4syo4FrrhOEzbtyG8GcTq6Qw==\"/>\n\t</CustOpts>\n</request>")).asXml
      .body(StringBody(reqBodyLocalBigger)).asXml

    )

  setUp(
    scnAdvLoad.inject(
//      constantUsersPerSec(500) during (60 seconds)
      rampConcurrentUsers(400).to(600).during(1200)
    ).protocols(httpProtocol))
}

